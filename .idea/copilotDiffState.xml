<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/main.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/main.py" />
              <option name="originalContent" value="from flask import Flask, request, render_template, redirect, url_for&#10;import math&#10;import itertools&#10;&#10;app = Flask(__name__)&#10;&#10;&#10;def calculate_distance(p1, p2):&#10;    &quot;&quot;&quot;Calculates Euclidean distance between two points.&quot;&quot;&quot;&#10;    return math.dist(p1, p2)&#10;&#10;&#10;def validate_input(locations_data):&#10;    &quot;&quot;&quot;&#10;    Validates that input is a list of tuples/lists,&#10;    contains only numbers, and has dimension 2.&#10;    &quot;&quot;&quot;&#10;    if not isinstance(locations_data, list):&#10;        return False&#10;    if len(locations_data) == 0:&#10;        return False&#10;    for point in locations_data:&#10;        # Check if point is tuple or list and has exactly 2 coordinates&#10;        if not isinstance(point, (list, tuple)) or len(point) != 2:&#10;            return False&#10;        # Check if coordinates are numbers (int or float)&#10;        if not all(isinstance(coord, (int, float)) for coord in point):&#10;            return False&#10;    return True&#10;&#10;&#10;@app.route('/')&#10;def home():&#10;    # Check if 'locations' parameter exists in URL&#10;    locations_str = request.args.get('locations')&#10;&#10;    # [cite_start]If no locations are provided, render the Home Page [cite: 38]&#10;    if locations_str is None:&#10;        return render_template('home_page.html')&#10;&#10;    # If locations ARE provided, process the TSP logic&#10;    try:&#10;        # [cite_start]Parse the input string using eval() as suggested [cite: 63]&#10;        # Note: In a production environment, ast.literal_eval is safer,&#10;        # but we are following the assignment hints.&#10;        locations = eval(locations_str)&#10;&#10;        # [cite_start]Validate Input [cite: 30, 31]&#10;        if not validate_input(locations):&#10;            raise ValueError(&quot;Invalid input format&quot;)&#10;&#10;        # TSP Logic&#10;        [cite_start]&#10;        start_node = (0, 0)  # [cite: 8]&#10;        min_distance = float('inf')&#10;        best_path = []&#10;&#10;        # [cite_start]Generate all permutations of the locations [cite: 61]&#10;        # We fix the start/end at (0,0), so we permute the destinations&#10;        for perm in itertools.permutations(locations):&#10;            current_path = [start_node] + list(perm) + [start_node]&#10;            current_dist = 0&#10;&#10;            # Calculate total distance for this permutation&#10;            for i in range(len(current_path) - 1):&#10;                current_dist += calculate_distance(current_path[i], current_path[i + 1])&#10;&#10;            # Check if this is the shortest path&#10;            if current_dist &lt; min_distance:&#10;                min_distance = current_dist&#10;                best_path = current_path&#10;&#10;        # [cite_start]Prepare data for the table [cite: 20]&#10;        # Steps format: (Index, From, To)&#10;        steps = []&#10;        for i in range(len(best_path) - 1):&#10;            steps.append({&#10;                &quot;id&quot;: i + 1,&#10;                &quot;from&quot;: best_path[i],&#10;                &quot;to&quot;: best_path[i + 1]&#10;            })&#10;&#10;        # [cite_start]Render Results Page [cite: 54]&#10;        return render_template(&#10;            'results.html',&#10;            [cite_start]&#10;        distance = f&quot;{min_distance:.3f}&quot;,  # Round to 3 decimal places [cite: 17]&#10;        steps = steps&#10;        )&#10;&#10;        except Exception:&#10;        # [cite_start]In case of any error (parsing or logic), show error message [cite: 33, 64]&#10;        return render_template('results.html', error=True)&#10;&#10;&#10;# [cite_start]Handle 404 errors by redirecting to home page [cite: 35]&#10;@app.errorhandler(404)&#10;def page_not_found(e):&#10;    return redirect(url_for('home'))&#10;&#10;&#10;if __name__ == '__main__':&#10;    app.run(debug=True)" />
              <option name="updatedContent" value="from flask import Flask, request, render_template, redirect, url_for&#10;import math&#10;import itertools&#10;&#10;app = Flask(__name__)&#10;&#10;&#10;def calculate_distance(p1, p2):&#10;    &quot;&quot;&quot;Calculates Euclidean distance between two points.&quot;&quot;&quot;&#10;    return math.sqrt((p1[0] - p2[0]) ** 2 + (p1[1] - p2[1]) ** 2)&#10;&#10;&#10;def validate_input(locations_data):&#10;    &quot;&quot;&quot;&#10;    Validates that input is a list of tuples/lists,&#10;    contains only numbers, and has dimension 2.&#10;    &quot;&quot;&quot;&#10;    if not isinstance(locations_data, list):&#10;        return False&#10;    if len(locations_data) == 0:&#10;        return False&#10;    for point in locations_data:&#10;        # Check if point is tuple or list and has exactly 2 coordinates&#10;        if not isinstance(point, (list, tuple)) or len(point) != 2:&#10;            return False&#10;        # Check if coordinates are numbers (int or float)&#10;        if not all(isinstance(coord, (int, float)) for coord in point):&#10;            return False&#10;    return True&#10;&#10;&#10;@app.route('/')&#10;def home():&#10;    # Check if 'locations' parameter exists in URL&#10;    locations_str = request.args.get('locations')&#10;&#10;    # If no locations are provided, render the Home Page&#10;    if locations_str is None:&#10;        return render_template('home_page.html')&#10;&#10;    # If locations ARE provided, process the TSP logic&#10;    try:&#10;        # Parse the input string using eval() as suggested&#10;        # Note: In a production environment, ast.literal_eval is safer,&#10;        # but we are following the assignment hints.&#10;        locations = eval(locations_str)&#10;&#10;        # Validate Input&#10;        if not validate_input(locations):&#10;            raise ValueError(&quot;Invalid input format&quot;)&#10;&#10;        # TSP Logic&#10;        start_node = (0, 0)&#10;        min_distance = float('inf')&#10;        best_path = []&#10;&#10;        # Generate all permutations of the locations&#10;        # We fix the start/end at (0,0), so we permute the destinations&#10;        for perm in itertools.permutations(locations):&#10;            current_path = [start_node] + list(perm) + [start_node]&#10;            current_dist = 0&#10;&#10;            # Calculate total distance for this permutation&#10;            for i in range(len(current_path) - 1):&#10;                current_dist += calculate_distance(current_path[i], current_path[i + 1])&#10;&#10;            # Check if this is the shortest path&#10;            if current_dist &lt; min_distance:&#10;                min_distance = current_dist&#10;                best_path = current_path&#10;&#10;        # Prepare data for the table&#10;        # Steps format: (Index, From, To)&#10;        steps = []&#10;        for i in range(len(best_path) - 1):&#10;            steps.append({&#10;                &quot;id&quot;: i + 1,&#10;                &quot;from&quot;: best_path[i],&#10;                &quot;to&quot;: best_path[i + 1]&#10;            })&#10;&#10;        # Render Results Page&#10;        return render_template(&#10;            'results.html',&#10;            distance=f&quot;{min_distance:.3f}&quot;,&#10;            steps=steps&#10;        )&#10;&#10;    except Exception:&#10;        # In case of any error (parsing or logic), show error message&#10;        return render_template('results.html', error=True)&#10;&#10;&#10;# Handle 404 errors by redirecting to home page&#10;@app.errorhandler(404)&#10;def page_not_found(e):&#10;    return redirect(url_for('home'))&#10;&#10;&#10;if __name__ == '__main__':&#10;    app.run(debug=True)&#10;&#10;&#10;if __name__ == '__main__':&#10;    app.run(debug=True)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/templates/results.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/templates/results.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;title&gt;TSP Results&lt;/title&gt;&#10;    &lt;style&gt;&#10;        body {&#10;            font-family: Arial, sans-serif;&#10;            text-align: center;&#10;            margin-top: 50px;&#10;            background-color: #f4f4f9;&#10;        }&#10;        .container {&#10;            background-color: white;&#10;            width: 60%;&#10;            margin: 0 auto;&#10;            padding: 30px;&#10;            border-radius: 10px;&#10;            box-shadow: 0 0 10px rgba(0,0,0,0.1);&#10;        }&#10;        h1 { color: #333; }&#10;        h2 { color: #2c3e50; }&#10;        .error {&#10;            color: red;&#10;            font-weight: bold;&#10;            font-size: 20px;&#10;        }&#10;        table {&#10;            width: 80%;&#10;            margin: 20px auto;&#10;            border-collapse: collapse;&#10;        }&#10;        th, td {&#10;            border: 1px solid #ddd;&#10;            padding: 12px;&#10;            text-align: center;&#10;        }&#10;        th {&#10;            background-color: #f2f2f2;&#10;            color: #333;&#10;        }&#10;        .home-link {&#10;            display: inline-block;&#10;            margin-top: 20px;&#10;            text-decoration: none;&#10;            color: white;&#10;            background-color: #007BFF;&#10;            padding: 10px 20px;&#10;            border-radius: 5px;&#10;        }&#10;        .home-link:hover { background-color: #0056b3; }&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        {% if error %}&#10;            &lt;h1 class=&quot;error&quot;&gt;An error occurred. Input invalid.&lt;/h1&gt;&#10;            &lt;p&gt;Please ensure your coordinates are valid numbers in format [(x,y), ...]&lt;/p&gt;&#10;&#10;        {% else %}&#10;            &lt;h1&gt;The shortest path&lt;/h1&gt;&#10;            &lt;h2&gt;Length is {{ distance }}&lt;/h2&gt;&#10;&#10;            &lt;p&gt;The following table:&lt;/p&gt;&#10;            &lt;table&gt;&#10;                &lt;thead&gt;&#10;                    &lt;tr&gt;&#10;                        &lt;th&gt;#&lt;/th&gt;&#10;                        &lt;th&gt;From&lt;br&gt;To&lt;/th&gt;&#10;                    &lt;/tr&gt;&#10;                &lt;/thead&gt;&#10;                &lt;tbody&gt;&#10;                    {% for step in steps %}&#10;                    &lt;tr&gt;&#10;                        &lt;td&gt;{{ step.id }}&lt;/td&gt;&#10;                        &lt;td&gt;&#10;                            {{ step.from }}&lt;br&gt;&lt;br&gt;&#10;                            {{ step.to }}&#10;                        &lt;/td&gt;&#10;                    &lt;/tr&gt;&#10;                    {% endfor %}&#10;                &lt;/tbody&gt;&#10;            &lt;/table&gt;&#10;        {% endif %}&#10;&#10;        &lt;a href=&quot;/&quot; class=&quot;home-link&quot;&gt;Return to home page&lt;/a&gt;&#10;    &lt;/div&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;title&gt;TSP Results&lt;/title&gt;&#10;    &lt;style&gt;&#10;        body {&#10;            font-family: Arial, sans-serif;&#10;            text-align: center;&#10;            margin-top: 50px;&#10;            background-color: #f4f4f9;&#10;        }&#10;        .container {&#10;            background-color: white;&#10;            width: 60%;&#10;            margin: 0 auto;&#10;            padding: 30px;&#10;            border-radius: 10px;&#10;            box-shadow: 0 0 10px rgba(0,0,0,0.1);&#10;        }&#10;        h1 { color: #333; }&#10;        h2 { color: #2c3e50; }&#10;        .error {&#10;            color: red;&#10;            font-weight: bold;&#10;            font-size: 20px;&#10;        }&#10;        table {&#10;            width: 80%;&#10;            margin: 20px auto;&#10;            border-collapse: collapse;&#10;        }&#10;        th, td {&#10;            border: 1px solid #ddd;&#10;            padding: 12px;&#10;            text-align: center;&#10;        }&#10;        th {&#10;            background-color: #f2f2f2;&#10;            color: #333;&#10;        }&#10;        .home-link {&#10;            display: inline-block;&#10;            margin-top: 20px;&#10;            text-decoration: none;&#10;            color: white;&#10;            background-color: #007BFF;&#10;            padding: 10px 20px;&#10;            border-radius: 5px;&#10;        }&#10;        .home-link:hover { background-color: #0056b3; }&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        {% if error %}&#10;            &lt;h1 class=&quot;error&quot;&gt;An error occurred. Input invalid.&lt;/h1&gt;&#10;            &lt;p&gt;Please ensure your coordinates are valid numbers in format [(x,y), ...]&lt;/p&gt;&#10;&#10;        {% else %}&#10;            &lt;h1&gt;The shortest path&lt;/h1&gt;&#10;            &lt;h2&gt;Length is {{ distance }}&lt;/h2&gt;&#10;&#10;            &lt;table&gt;&#10;                &lt;thead&gt;&#10;                    &lt;tr&gt;&#10;                        &lt;th&gt;&lt;/th&gt;&#10;                        &lt;th&gt;From&lt;/th&gt;&#10;                        &lt;th&gt;To&lt;/th&gt;&#10;                    &lt;/tr&gt;&#10;                &lt;/thead&gt;&#10;                &lt;tbody&gt;&#10;                    {% for step in steps %}&#10;                    &lt;tr&gt;&#10;                        &lt;td&gt;{{ step.id }}&lt;/td&gt;&#10;                        &lt;td&gt;{{ step.from }}&lt;/td&gt;&#10;                        &lt;td&gt;{{ step.to }}&lt;/td&gt;&#10;                    &lt;/tr&gt;&#10;                    {% endfor %}&#10;                &lt;/tbody&gt;&#10;            &lt;/table&gt;&#10;        {% endif %}&#10;&#10;        &lt;a href=&quot;/&quot; class=&quot;home-link&quot;&gt;Return to home page&lt;/a&gt;&#10;    &lt;/div&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>